---
import { clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

interface Event {
  id: string;
  agent: 'Orchestrator' | 'StyleScout' | 'RepoAnalyst' | 'Architect';
  action: string;
  target?: string;
  timestamp: string;
  status: 'info' | 'success' | 'warning' | 'error';
}

interface Props {
  events: Event[];
}

const { events } = Astro.props;

// Utility for Shadcn-like class merging
function cn(...inputs: (string | undefined | null | false)[]) {
  return twMerge(clsx(inputs));
}

const agentColors = {
  Orchestrator: 'text-indigo-400 border-indigo-500/20 bg-indigo-500/10',
  StyleScout: 'text-cyan-400 border-cyan-500/20 bg-cyan-500/10',
  RepoAnalyst: 'text-emerald-400 border-emerald-500/20 bg-emerald-500/10',
  Architect: 'text-amber-400 border-amber-500/20 bg-amber-500/10',
};
---

<div class="space-y-3">
  {events.map((event) => (
    <div class={cn(
      "relative group flex flex-col gap-2 rounded-lg border p-3 transition-all",
      "bg-zinc-900/40 border-zinc-800 hover:border-zinc-700 hover:bg-zinc-900"
    )}>
      <div class="flex items-center justify-between">
        <span class={cn(
          "px-1.5 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border",
          agentColors[event.agent]
        )}>
          {event.agent}
        </span>
        <span class="text-[10px] text-zinc-600">
          {event.timestamp}
        </span>
      </div>
      
      <div class="flex flex-col">
        <span class="text-zinc-300 font-medium">
          {event.action}
        </span>
        {event.target && (
          <span class="text-zinc-500 truncate mt-1 pl-2 border-l-2 border-zinc-800">
            {event.target}
          </span>
        )}
      </div>
    </div>
  ))}
  
  {events.length === 0 && (
    <div class="text-center py-10 text-zinc-600 italic">
      No swarm activity detected.
    </div>
  )}
</div>
